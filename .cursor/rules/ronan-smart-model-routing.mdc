---
description: "Smart model selection based on task complexity and cost optimization - Updated for Surgical 6-Template Architecture"
alwaysApply: true
---

ruleSet:
  name: "ronan-smart-model-routing-surgical"
  description: "Auto-selects the appropriate model based on task complexity and matching phrases. Optimized for surgical 6-template Session Continuity Core system."
  trigger:
    fileExtensions: [".md"]

  rules:
    # ðŸ”µ TOP PRIORITY: YAML Metadata Rules (Highest Precedence)
    - name: "Use Claude 3 Opus for high-priority context files"
      if:
        - file.yamlContains("context-priority: high")
      then:
        - useModel: "claude-3-opus"

    # ðŸŸ  Strategic File Pattern Matching
    - name: "Use Claude 3.7 for continuity and framework development"
      if:
        - file.contains("QUICK-START.md")
        - file.contains("USER-GUIDE.md")
        - file.contains("EXAMPLES.md")
        - file.contains("BREAKTHROUGH-ACHIEVEMENTS.md")
        - file.contains("session continuity")
        - file.contains("meta-collaboration")
        - file.contains("systematic approach")
        - file.contains("framework development")
      then:
        - useModel: "claude-3.7-sonnet"

    # ðŸ”´ Premium Tier: Critical Architecture and Synthesis
    - name: "Use Claude 4 Sonnet for critical architectural decisions"
      if:
        - file.contains("final synthesis")
        - file.contains("comprehensive conclusion")
        - file.contains("critical decision")
        - file.contains("final validation")
        - file.contains("project conclusion")
        - file.contains("major architectural choice")
        - file.contains("surgical system overview")
        - file.contains("complete deployment")
      then:
        - useModel: "claude-4-sonnet"

    # ðŸŸ£ Linked Notes and Structured Documentation
    - name: "Use Claude 3 Sonnet for well-structured notes"
      if:
        - file.yamlContains("linked-notes") 
        - file.yamlContains("summary")
      then:
        - preferModel: "claude-3-sonnet"

    # ðŸŸ¡ Efficient Tier: Compression and Standard Work
    - name: "Use Claude 3.5 Haiku for content compression and standard dev work"
      if:
        - file.contains("compression")
        - file.contains("editing")
        - file.contains("documentation")
        - file.contains("file processing")
        - file.contains("standard debugging")
        - file.contains("word reduction")
        - file.contains("surgical precision")
      then:
        - useModel: "claude-3.5-haiku"

    # ðŸŸ¢ Economy Tier: Routine Structural Work
    - name: "Use Cursor Small for routine or structural work"
      if:
        - file.contains("code completion")
        - file.contains("syntax")
        - file.contains("quick fix")
        - file.contains("template structure")
        - file.contains("basic question")
        - file.contains("YAML")
        - file.contains("file organization")
        - file.contains("project requirements")
      then:
        - useModel: "cursor-small"

    # ðŸŸ¤ Default Fallback
    - name: "Default to Claude 3.5 Haiku"
      then:
        - useModel: "claude-3.5-haiku"

# Routing System Notes:
# - Precedence is top-down: first matching rule applies
# - YAML metadata takes highest priority
# - Strategic and content-based matching follow
# - Manual override always possible via chat
# - Optimized for Surgical 6-Template Session Continuity Core system